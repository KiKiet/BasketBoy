{"version":3,"sources":["file:///C:/Users/king/Documents/Bootcamp-AthenaStudio-TranGiaKiet/basket-boy/assets/scripts/ball.ts"],"names":["_decorator","Component","RigidBody2D","director","Collider2D","Contact2DType","AudioSource","AudioClip","Animation","GameManager","ccclass","property","Ball","onLoad","collider","getComponent","on","END_CONTACT","onEndContact","rb","node","parent","gainScore","score","thisNode","anim","update","deltaTime","ball_pos_x","position","x","isScore","loadScene","cnt","sleep","ballPos","awakeRbAndShoot","force","shootPower","active","applyForceToCenter","multiplyScalar","selfCollider","otherCollider","tag","checkGoal","sound","playOneShot","bounceSound"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAgGC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;AAAsEC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;;AAE7OC,MAAAA,W,iBAAAA,W;;;;;;;AAEDC,MAAAA,O,GAAsBV,U,CAAtBU,O;AAASC,MAAAA,Q,GAAaX,U,CAAbW,Q;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;sBAGaC,I,WADZF,OAAO,CAAC,MAAD,C,UAMHC,QAAQ,CAACL,WAAD,C,UAERK,QAAQ,CAACJ,SAAD,C;;;;;;;;;;;;oEALc,K;;;;;;gEAOV,C;;sEACa,K;;;;;;;eAI1BM,M,GAAA,kBAAU;AACN,cAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBX,UAAlB,CAAf;;AACA,cAAIU,QAAJ,EAAc;AACVA,YAAAA,QAAQ,CAACE,EAAT,CAAYX,aAAa,CAACY,WAA1B,EAAsC,KAAKC,YAA3C,EAAwD,IAAxD;AACH;;AACDN,UAAAA,IAAI,CAACO,EAAL,GAAU,KAAKJ,YAAL,CAAkBb,WAAlB,CAAV;AACA,eAAKkB,IAAL,CAAUC,MAAV,CAAiBN,YAAjB;AAAA;AAAA,0CAA2CO,SAA3C,CAAqDV,IAAI,CAACW,KAA1D;AACAX,UAAAA,IAAI,CAACY,QAAL,GAAgB,KAAKJ,IAArB;AACAR,UAAAA,IAAI,CAACa,IAAL,GAAY,KAAKV,YAAL,CAAkBP,SAAlB,CAAZ;AACH,S;;eAEDkB,M,GAAA,gBAAQC,SAAR,EAA2B;AACvB,cAAIC,UAAU,GAAG,KAAKR,IAAL,CAAUS,QAAV,CAAmBC,CAApC;;AACA,cAAIF,UAAU,GAAG,GAAb,IAAoBA,UAAU,GAAG,CAAC,GAAtC,EAA0C;AACtC,gBAAI,KAAKG,OAAL,IAAc,KAAlB,EAAwB;AACpBnB,cAAAA,IAAI,CAACW,KAAL,GAAa,CAAb;AACApB,cAAAA,QAAQ,CAAC6B,SAAT,CAAmB,kBAAnB;AACH,aAHD,MAIK;AACD7B,cAAAA,QAAQ,CAAC6B,SAAT,CAAmB,kBAAnB;AACH;AACJ;;AACD,cAAG,KAAKD,OAAL,IAAgB,KAAKE,GAAL,GAAW,CAA9B,EAAgC;AAC5BrB,YAAAA,IAAI,CAACO,EAAL,CAAQe,KAAR;AACA/B,YAAAA,QAAQ,CAAC6B,SAAT,CAAmB,kBAAnB;AACH,WAHD,MAIK,IAAI,KAAKD,OAAL,IAAc,KAAd,IAAuB,KAAKE,GAAL,GAAW,CAAtC,EAAwC;AACzCrB,YAAAA,IAAI,CAACW,KAAL,GAAa,CAAb;AACApB,YAAAA,QAAQ,CAAC6B,SAAT,CAAmB,kBAAnB;AACH;;AACDpB,UAAAA,IAAI,CAACuB,OAAL,GAAe,KAAKf,IAAL,CAAUS,QAAzB;AACH,S;;aACMO,e,GAAP,yBAAuBC,KAAvB,EAAoCC,UAApC,EAAsD;AAClD,eAAKd,QAAL,CAAce,MAAd,GAAuB,IAAvB;AACA,eAAKpB,EAAL,CAAQqB,kBAAR,CAA2BH,KAAK,CAACI,cAAN,CAAqBH,UAArB,CAA3B,EAA4D,IAA5D;AACH,S;;eACDpB,Y,GAAA,sBAAcwB,YAAd,EAAwCC,aAAxC,EAAkE;AAC9D,cAAIA,aAAa,CAACC,GAAd,IAAmB,CAAvB,EAAyB;AACrB,iBAAKC,SAAL,GAAe,IAAf;AACH;;AACD,cAAIF,aAAa,CAACC,GAAd,IAAmB,CAAnB,IAAsB,KAAKC,SAA/B,EAAyC;AACrCjC,YAAAA,IAAI,CAACW,KAAL;AACA,iBAAKH,IAAL,CAAUC,MAAV,CAAiBN,YAAjB;AAAA;AAAA,4CAA2CO,SAA3C,CAAqDV,IAAI,CAACW,KAA1D;AACA,iBAAKQ,OAAL,GAAa,IAAb;AACA,iBAAKc,SAAL,GAAe,KAAf;AACH;;AACD,cAAIF,aAAa,CAACC,GAAd,IAAqB,CAAzB,EAA2B;AACvB,iBAAKX,GAAL;AACH;;AACD,eAAKa,KAAL,CAAWC,WAAX,CAAuB,KAAKC,WAA5B;AACH,S;;;QAhEqB/C,S,qCACK,C;;;;;;;;;;;AAkE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Component, Node, EventTouch, v2, Camera, EventMouse, systemEvent, SystemEventType, Touch, Vec2, RigidBody2D, director, Collider2D, Contact2DType, BoxCollider2D, Prefab, instantiate, Scene, Line, Vec3, AudioSource, AudioClip, Animation, animation } from 'cc';\r\nimport { Basket } from './basket';\r\nimport { GameManager } from './gameManager';\r\nimport { Trajectory } from './trajectory';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = Ball\r\n * DateTime = Mon Feb 14 2022 16:00:44 GMT+0700 (Indochina Time)\r\n * Author = kingkiet25\r\n * FileBasename = ball.ts\r\n * FileBasenameNoExtension = ball\r\n * URL = db://assets/scripts/ball.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n \r\n@ccclass('Ball')\r\nexport class Ball extends Component {\r\n    public static score:number=0;\r\n    public isScore:boolean=false;\r\n    public static rb: RigidBody2D;\r\n    public static ballPos: Vec3;\r\n    @property(AudioSource)\r\n    sound: AudioSource;\r\n    @property(AudioClip)\r\n    bounceSound:AudioClip;\r\n    cnt:number = 0;\r\n    private checkGoal:boolean=false;\r\n    public static thisNode:Node;\r\n    public static anim:Animation;\r\n\r\n    onLoad () {\r\n        let collider = this.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.END_CONTACT,this.onEndContact,this);\r\n        }\r\n        Ball.rb = this.getComponent(RigidBody2D);\r\n        this.node.parent.getComponent(GameManager).gainScore(Ball.score);\r\n        Ball.thisNode = this.node;\r\n        Ball.anim = this.getComponent(Animation);\r\n    }\r\n\r\n    update (deltaTime: number) {\r\n        let ball_pos_x = this.node.position.x;\r\n        if (ball_pos_x > 575 || ball_pos_x < -575){\r\n            if (this.isScore==false){\r\n                Ball.score = 0;\r\n                director.loadScene(\"scenes/playScene\");\r\n            }\r\n            else {\r\n                director.loadScene(\"scenes/playScene\");\r\n            }\r\n        }\r\n        if(this.isScore && this.cnt > 2){\r\n            Ball.rb.sleep();\r\n            director.loadScene(\"scenes/playScene\");\r\n        }\r\n        else if (this.isScore==false && this.cnt > 2){\r\n            Ball.score = 0;\r\n            director.loadScene(\"scenes/playScene\");\r\n        }\r\n        Ball.ballPos = this.node.position;\r\n    }   \r\n    static awakeRbAndShoot(force: Vec2, shootPower:number){\r\n        this.thisNode.active = true;\r\n        this.rb.applyForceToCenter(force.multiplyScalar(shootPower),true);\r\n    }\r\n    onEndContact (selfCollider: Collider2D, otherCollider: Collider2D){\r\n        if (otherCollider.tag==1){\r\n            this.checkGoal=true;\r\n        }\r\n        if (otherCollider.tag==2&&this.checkGoal){\r\n            Ball.score++;\r\n            this.node.parent.getComponent(GameManager).gainScore(Ball.score);\r\n            this.isScore=true;\r\n            this.checkGoal=false;\r\n        }\r\n        if (otherCollider.tag == 3){\r\n            this.cnt++;\r\n        }\r\n        this.sound.playOneShot(this.bounceSound);\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}